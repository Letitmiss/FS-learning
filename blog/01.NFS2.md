

# NFS Server的配置

1. 需要的软件



## 需要的软件

### PRC主程序 rpcbind
* 在启动任何一个RPC服务之前必须启动rpcbind,检查是否有rpc
```bash
[root@localhost ~]# rpm -qa | grep rpcbind
rpcbind-0.2.0-12.el6.x86_64
````

### NFS主程序 nfs-utils
* 就是提供rpc.nfsd和rpc.mountd的两个NFS deamons;
```bash
[root@localhost ~]# rpm -qa | grep nfs
nfs-utils-lib-1.1.5-11.el6.x86_64
nfs4-acl-tools-0.3.3-8.el6.x86_64
nfs-utils-1.2.3-70.el6.x86_64
````

## NFS的软件结构

### 主要的配置文件 /etc/exports
* NFS主要配置文件,系统并没有默认值,这个文件也不一定存在,有可能需要手动去创建

### NFS文件系统维护命令
* 这个是NFS的共享资源命令,利用这个命令可以重新共享/etc/exports更新的目录资源,将NFS Server共享的目录卸载或重新共享
### 共享资源的额日志文件  `/var/lib/nfs/*tab`
* 在NFS服务器中日志文件都放置在/var/lib/nfs/目录下,两个比较重要的日志文件,一个是etab主要记录了NFS所共享出来的目录的完整权限设定值,另一个是xtab,记录了曾经链接到此NFS服务器的相关客户端的数据

### 客户端查询服务器共享资源 /usr/sbin/showmount
* exportfs用在服务端 ,showmount用在客户端展示服务端共享的目录资源

## /etc/exports配置文件的配置语法与参数

* 在使用NFS之前,必须了解,NFS会直接使用到内核的功能,所以内核必须支持NFS才行,内核版本小于2.2或者自己编译过内核,就要注意是否对NFS的支持;
```bash
[root@localhost nfs]# uname -r
2.6.32-642.el6.x86_64
[root@localhost nfs]# uname -a
Linux localhost.localdomain 2.6.32-642.el6.x86_64 #1 SMP Tue May 10 17:27:01 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
````

### NFS配置文件/etc/exports

* 这个文件默认是空的
````
[root@localhost nfs]# vim /etc/exports 

/tmp      192.168.253.129(ro)     localhost(rw)           *.env.ncku.edu.tw(ro,sync)
[共享目录] [客户端地址IP的配置]  [客户端地址主机名方式配置]       [客户端地址通配符方式配置]
````

