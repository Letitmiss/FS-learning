

# NFS的实际操作


1. NFS的启动


## NFS的启动
* 基本的组网规划
10.253.177.9 NFS Server 与 10.253.177.13 NFS client1 和10.253.177.15 NFS Client2   
* 启动服务端
````
lfg1000708009:~ # /etc/init.d/rpcbind start  <= 必须先启动rpcbind服务 
Starting rpcbind
lfg1000708009:~ # vim /etc/exports       <==编辑配置文件

# See the exports(5) manpage for a description of the syntax of this file.
# This file contains a list of all directories that are to be exported to 
# other computers via NFS (Network File System).
# This file used by rpc.nfsd and rpc.mountd. See their manpages for details
# on how make changes in this file effective.
/tmp *(rw,no_root_squash)
/home/public 10.253.177.10/15(rw) *(ro)
/home/test 10.253.177.13(rw)
/home/linux 10.253.177.10/15(rw,all_squash,anonuid=45,anongid=45)
# 这里共享的文件夹必须先创建


lfg1000708009:~ # /etc/init.d/nfs start              # 启动失败,
Not starting NFS client services - no NFS found in /etc/fstab:   
lfg1000708009:~ # cat /etc/issue             # 查看linux版本为SUSE
Welcome to SUSE Linux Enterprise Server 11 SP3  (x86_64) - Kernel \r (\l).
# SUSE需要安装客户端的  #CentoS默认已经有了nfs-utils
lfg1000708009:~ # rpm -qa | grep -E "nfs|rpc"
librpcsecgss-0.18-1.15
libtirpc1-0.2.1-1.5.1
limal-nfs-server-1.5.3-0.2.11
limal-nfs-server-perl-1.5.3-0.2.11
nfs-client-1.2.3-18.31.1
nfsidmap-0.25-0.11.29
yast2-nfs-common-2.17.8-0.2.1
yast2-nfs-client-2.17.17-0.7.71
yast2-nfs-server-2.17.8-0.2.1
nfs-doc-1.2.3-18.29.1
rpcbind-0.1.6+git20080930-6.24.1
lfg1000708009:/home/nfs # l nfs-kernel-server-1.2.3-18.29.1.x86_64.rpm   #找到这个NFS包
-rw-r--r-- 1 root root 113606 Nov 20 17:10 nfs-kernel-server-1.2.3-18.29.1.x86_64.rpm
lfg1000708009:/home/nfs # rpm -ivh nfs-kernel-server-1.2.3-18.29.1.x86_64.rpm   #rpm安装
Preparing...                ########################################### [100%]
   1:nfs-kernel-server      ########################################### [100%]
insserv: script kdump: service boot.kdump already provided!
lfg1000708009:/home/test # /etc/init.d/nfsserver start   # 启动服务
Starting kernel based NFS server: idmapdexportfs: /etc/exports [1]: Neither 'subtree_check' or 'no_subtree_check' specified for export "*:/tmp".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

exportfs: /etc/exports [2]: Neither 'subtree_check' or 'no_subtree_check' specified for export "10.253.177.10/15:/home/public".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

exportfs: /etc/exports [2]: Neither 'subtree_check' or 'no_subtree_check' specified for export "*:/home/public".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

exportfs: /etc/exports [3]: Neither 'subtree_check' or 'no_subtree_check' specified for export "10.253.177.13:/home/test".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

exportfs: /etc/exports [4]: Neither 'subtree_check' or 'no_subtree_check' specified for export "10.253.177.10/15:/home/linux".
  Assuming default behaviour ('no_subtree_check').
  NOTE: this default has changed since nfs-utils version 1.0.x

 mountd statd nfsd sm-notify   


````
